

### VIM编辑器

vim三种工作模式

1. 命令模式
2. 输入模式
3. 编辑模式


~~~
编辑abc，当abc文件存在时，打开abc并进入，如果abc不存在，则临时新建一个abc并进入，当编辑完保存退出后新建abc文件于当前目录 
vi abc
~~~

~~~
命令模式 ---> a, A, i, I, o, O   ---> 输入模式
命令模式 --->     :         ---> 编辑模式
输入模式 --->     esc       ---> 命令模式
~~~


#### 输入模式
进入输入模式方式：
~~~
a   在光标所在字符后插入
A   在光标所在行尾插入
i   在光标所在字符前插入
I   在光标所在行首插入
o   在光标下插入新行   
O   在光标上插入新行
~~~


#### 编辑模式

~~~
:w       保存
    跟文件名，另存为 :w bcd
:q       退出
:wq      保存并退出
    大写 ZZ 也是保存退出，相当于 :wq
:q!      强制不保存退出
:wq!     强制保存并退出，用于文件所有者或者root用户修改没有写权限的文件
~~~



#### 命令模式

* 移动光标
~~~
上下左右键盘或者键盘hjkl移动光标

h       向左移动光标
j       向下移动光标
k       向上移动光标
l       向右移动光标

gg      移动到文件首
G       移动到文件尾
^       移动到行首
$       移动到行尾
:n      移动到第n行，按回车执行
~~~

* 复制 粘贴 剪切
~~~
删除或者剪切，不粘贴就相当于删除
x       删除或剪切单个字母，删除光标之后
nx      删除或剪切n个字母
dd      删除或剪切一行，删除光标所在的一行
ndd     删除或剪切n行，光标往下n行，包括光标所在行
:n1,n2d 删除或剪切n1到n2的行数，例 :2,5d 删除第2到第5行，一共4行
dG      从光标所在行删除到文件尾，d是删除行，G是文件尾，当光标在第一行时，即删除整个文件

yy      复制一行
nyy     复制n行，从光标所在行开始往下复制，

p       粘贴到光标后
P(大写) 粘贴到光标前
~~~

~~~
u       撤销，能撤销到文件打开时的状态，
ctrl+r  反撤销，能反撤销到最后一次修改的状态
r       替换光标所在处的字符，按r再按需要替换的字符
R       进入替换模式，从光标所在处开始替换，按Esc退出
~~~

* 查找 替换
~~~
/查找内容       往下开始查找
?查找内容       往上开始查找
n              下一个，如果是通过 /来查找，则往下显示下一个查找内容，如果通过?来查找，则往上显示查找内容
N              上一个，同上，例: ?abc ，N显示向下的abc。即向上查找的上一个，就是文件往下

:n1,n2s/old/new/g   把n1行到n2行得所有old替换为new,最后的 /g 是替换所有的意思，不加只会替换n1到n2行内查找到的第一个，但是新版本不加 /g 也可以，会替换n1到n2的所有

例:用#注释1到10行
:1,10/^/#
取消注释,new的位置不写表示置空，
:1,10/^#/

例:用 // 注释1到10行, / 是特殊字符，需要通过 \ 转义   \在linux终端输入时表示命令换行 
:1,10s/^/\/\/
取消注释
:1,10s/^\/\//
~~~

#### 配置

配置文件位于 ~/.vimrc 没有此文件，新建一个，此文件对当前用户有效

~~~
:set number     显示行号
:set nonumber   不显示行号

:syntax on      根据语法显示颜色帮助
:syntax off     不显示颜色帮助

:set hlsearch   高亮显示查找得字符，默认高亮显示
:set nohlsearch 不高亮显示查找得字符

:set list       显示隐藏字符，
:set nolist     不显示隐藏字符，默认不显示
    windows下回车符在linux下通过 :set list显示为 ^M$ ,而linux的回车符是 **^$** ，可通过dos2unix转换格式，反过来用unix2dos
    dos2unix: windows格式 --> linux格式 
    unix2dos: linux格式   --> windwos格式


:set all        查看所有参数设置
~~~



#### 其他


~~~
:r 文件名       在vi中导入其他文件内容，建议用绝对路径
:! 命令         在vi中执行系统命令

例: 在vi中导入 当前日期
:r ! date

~~~

* 快捷键
~~~
:map 快捷键 快捷键执行的命令

例: 按 ctrl+p 在首行注释,^p 需要通过 ctrl+v+p来输入，I是在光标所在行首插入，#就是输入# 最后通过 <ESC>退出插入模式
:map ^p I#<ESC>

例: 按 ctrl +b 删除当前行注释，或者删除当前行第一个字符, ^是行首，x是删除一个字符，连起来即删除行首一个字符
:map ^B ^x
~~~

* 字符替换
~~~
:ab 源字符 替换的字符

例:每当输入 myemail 替换为 saintkayluk@gmail.com，输入 myemail 之后需要空格或者回车键来替换
:ab myemail saintkayluk@gmail.com
~~~

* 同时打开多个文件
~~~
小写o上下分屏，大写O左右分屏，通过 ctrl+w 加上 上下或者左右箭头 在不同文件切换，退出需要一个个文件操作。比如一个个 :wq 保存退出

vim -o 文件1 文件2 ...  上下分屏文件1，文件2等，通过 ctrl+w 加 上下箭头切换文件
vim -O 文件1 文件2 ...  左右分屏文件1，文件2等，通过 ctrl+w 加 左右箭头切换文件
~~~